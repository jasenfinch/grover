<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="grover">
<title>Accessing raw mass spectrometry data from a grover API • grover</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Accessing raw mass spectrometry data from a grover API">
<meta property="og:description" content="grover">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">grover</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/client-usage.html">Accessing raw mass spectrometry data from a grover API</a>
    <a class="dropdown-item" href="../articles/hosting.html">Hosting a grover API</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jasenfinch/grover/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Accessing raw mass spectrometry data from a grover API</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jasenfinch/grover/blob/HEAD/vignettes/client-usage.Rmd" class="external-link"><code>vignettes/client-usage.Rmd</code></a></small>
      <div class="d-none name"><code>client-usage.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This vignette outlines the <code>grover</code> package client-side
functionality for accessing a raw mass spectrometry data repository
hosted by grover API. This functionality includes repository contents
querying, file transfer, file information retrieval, sample information
retrieval and raw data conversion.</p>
<p>To get started we can first load the <code>grover</code> package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jasenfinch.github.io/grover/">grover</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-api">Example API<a class="anchor" aria-label="anchor" href="#example-api"></a>
</h2>
<p>For this example we will run an example grover API provided by the
package. This will run as a background process to allow us to interact
with the API without having to use an alterative R console. To activate
this run the following:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grover_host</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/grover.html">grover</a></span><span class="op">(</span>host <span class="op">=</span> <span class="st">"127.0.0.1"</span>,</span>
<span>                     port <span class="op">=</span> <span class="fl">8000</span>,</span>
<span>                     auth <span class="op">=</span> <span class="st">"1234"</span>,</span>
<span>                     repository <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'repository'</span>,</span>
<span>                                              package <span class="op">=</span> <span class="st">'grover'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">api</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/groverAPI.html">groverAPI</a></span><span class="op">(</span><span class="va">grover_host</span>,</span>
<span>                 background <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                 log_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">'/logs'</span><span class="op">)</span>,</span>
<span>                 temp_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">'/temp'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>For further details on hosting a grover API see the <a href="hosting.html">Hosting a grover API</a> vignette.</p>
</div>
<div class="section level2">
<h2 id="grover-api-host-details">grover API host details<a class="anchor" aria-label="anchor" href="#grover-api-host-details"></a>
</h2>
<p>In order to access the API, we need to first provide the host details
of the grover API. There are two ways to do this. The primary method is
through the use of a configuration file that can then be parsed and
specified when the API is activated. This should be in YAML format and
have the structure shown below:</p>
<pre><code>host: 127.0.0.1
port: 8000
auth: 1234</code></pre>
<p>This specifies the host address, the port, and authentication key
that matches the key with which the host has been configured.</p>
<p>The package contains an example file that we can parse here using the
<code><a href="../reference/readGrover.html">readGrover()</a></code> function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grover_client</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/readGrover.html">readGrover</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'grover_client.yml'</span>,package <span class="op">=</span> <span class="st">'grover'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>This returns an S4 object of class <code>GroverClient</code> that
contains the API host information. The host information can be viewed by
printing the object:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">grover_client</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co"><span style="color: #0000BB;">#&gt; Grover Information</span></span></span>
<span><span class="co"><span style="color: #0000BB;">#&gt; </span></span></span>
<span><span class="co"><span style="color: #0000BB;">#&gt; </span>Host:        127.0.0.1 </span></span>
<span><span class="co">#&gt; Port:         8000 </span></span>
<span><span class="co">#&gt; Authentication:   1234</span></span></code></pre></div>
<p>The second method, and the method that will be used for this example,
is to specify the host details directly using the <code><a href="../reference/grover.html">grover()</a></code>
function like the following:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grover_client</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/grover.html">grover</a></span><span class="op">(</span>host <span class="op">=</span> <span class="st">"127.0.0.1"</span>,</span>
<span>                     port <span class="op">=</span> <span class="fl">8000</span>,</span>
<span>                     auth <span class="op">=</span> <span class="st">"1234"</span><span class="op">)</span></span></code></pre></div>
<p>This enables us to access the grover API hosting the example data
repository included in the package.</p>
<p>Using this host information, we can first check that the API is
running using the <code><a href="../reference/extant.html">extant()</a></code> function as shown below:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extant.html">extant</a></span><span class="op">(</span><span class="va">grover_client</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="querying-the-data-repository-contents">Querying the data repository contents<a class="anchor" aria-label="anchor" href="#querying-the-data-repository-contents"></a>
</h2>
<p>We can list the instruments available within the data reposiroty
using the following:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list.html">listInstruments</a></span><span class="op">(</span><span class="va">grover_client</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Thermo-Exactive"</span></span></code></pre></div>
<p>As can be seen above, there is a single instrument available named
Thermo-Exactive. To list the experiment directories available for this
instrument, we can use the code below.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list.html">listDirectories</a></span><span class="op">(</span><span class="va">grover_client</span>,<span class="st">'Thermo-Exactive'</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Experiment_1"</span></span></code></pre></div>
<p>This shows a single experiment data directory available. We can then
list the contents of this directory to identify the data files
available:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/list.html">listFiles</a></span><span class="op">(</span><span class="va">grover_client</span>,<span class="st">'Thermo-Exactive'</span>,<span class="st">'Experiment_1'</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "QC01.raw"</span></span></code></pre></div>
<p>We can see that there is a single raw data file available in this
example repository.</p>
</div>
<div class="section level2">
<h2 id="file-information">File information<a class="anchor" aria-label="anchor" href="#file-information"></a>
</h2>
<p>File Information such as file size and creation date be retrieved. We
can see this for the example file <code>QC01.raw</code> using the
following:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/stats.html">fileInfo</a></span><span class="op">(</span><span class="va">grover_client</span>,<span class="st">'Thermo-Exactive'</span>,<span class="st">'Experiment_1'</span>,<span class="st">'QC01.raw'</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 6</span></span></span>
<span><span class="co">#&gt;   instrument      directory    file     extension        size  birth_time</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fs::bytes&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Thermo-Exactive Experiment_1 QC01.raw raw             6.88M <span style="text-decoration: underline;">1</span>676<span style="text-decoration: underline;">904</span>419.</span></span></code></pre></div>
<p>This can also be done directory wide when multiple files are
available.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/stats.html">directoryFileInfo</a></span><span class="op">(</span><span class="va">grover_client</span>,<span class="st">'Thermo-Exactive'</span>,<span class="st">'Experiment_1'</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 6</span></span></span>
<span><span class="co">#&gt;   instrument      directory    file     extension        size  birth_time</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fs::bytes&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Thermo-Exactive Experiment_1 QC01.raw raw             6.88M <span style="text-decoration: underline;">1</span>676<span style="text-decoration: underline;">904</span>419.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="transfer-files">Transfer files<a class="anchor" aria-label="anchor" href="#transfer-files"></a>
</h2>
<p>Individual files can be transferred from the repository using
<code><a href="../reference/transfer.html">transferFile()</a></code> , stipulating the instrument, experiment
directory and file name. The <code>outDir</code> argument allows us to
declare where the file will be downloaded to. In the example below, the
file will be transfered to the current working directory.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/transfer.html">transferFile</a></span><span class="op">(</span><span class="va">grover_client</span>,</span>
<span>             <span class="st">'Thermo-Exactive'</span>,</span>
<span>             <span class="st">'Experiment_1'</span>,</span>
<span>             <span class="st">'QC01.raw'</span>,</span>
<span>             outDir <span class="op">=</span> <span class="st">'.'</span><span class="op">)</span></span></code></pre></div>
<p>Similarly, we can transfer an entire directory:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/transfer.html">transferDirectory</a></span><span class="op">(</span><span class="va">grover_client</span>,</span>
<span>                  <span class="st">'Thermo-Exactive'</span>,</span>
<span>                  <span class="st">'Experiment_1'</span>,</span>
<span>                  outDir <span class="op">=</span> <span class="st">'.'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="sample-information">Sample information<a class="anchor" aria-label="anchor" href="#sample-information"></a>
</h2>
<p>Thermo <code>.raw</code> mass spectrometry data files contain sample
meta information within the file headers. This can be extracted and
retrieved, in the form of a tibble, for a given file using:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sampleInfo</span>(grover_client,<span class="st">'Thermo-Exactive'</span>,<span class="st">'Experiment_1'</span>,<span class="st">'QC01.raw'</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>QC01.raw  [32m✔ [39m</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m# A tibble: 1 × 39 [39m</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   `RAW file` RAW file …¹ Creat…² Opera…³ Numbe…⁴ Descr…⁵ Instr…⁶ Instr…⁷ Instr…⁸</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    [3m [38;5;246m&lt;chr&gt; [39m [23m       [3m [38;5;246m&lt;chr&gt; [39m [23m        [3m [38;5;246m&lt;chr&gt; [39m [23m    [3m [38;5;246m&lt;chr&gt; [39m [23m      [3m [38;5;246m&lt;dbl&gt; [39m [23m  [3m [38;5;246m&lt;chr&gt; [39m [23m    [3m [38;5;246m&lt;chr&gt; [39m [23m    [3m [38;5;246m&lt;chr&gt; [39m [23m    [3m [38;5;246m&lt;chr&gt; [39m [23m  </span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [38;5;250m1 [39m QC01.raw   64          04/25/… Thermo        2  [38;5;246m" [39m [38;5;246m" [39m      Exacti… Thermo… C:/Xca…</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m# … with 30 more variables: `Serial number` &lt;chr&gt;, `Software version` &lt;chr&gt;, [39m</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m#   `Firmware version` &lt;chr&gt;, Units &lt;chr&gt;, `Mass resolution` &lt;chr&gt;, [39m</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m#   `Number of scans` &lt;dbl&gt;, `Number of ms2 scans` &lt;dbl&gt;, `Scan range` &lt;dbl&gt;, [39m</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m#   `Time range` &lt;dbl&gt;, `Mass range` &lt;dbl&gt;, `Scan filter (first scan)` &lt;chr&gt;, [39m</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m#   `Scan filter (last scan)` &lt;chr&gt;, `Total number of filters` &lt;chr&gt;, [39m</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m#   `Sample name` &lt;chr&gt;, `Sample id` &lt;chr&gt;, `Sample type` &lt;chr&gt;, [39m</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [38;5;246m#   `Sample comment` &lt;chr&gt;, `Sample vial` &lt;chr&gt;, `Sample volume` &lt;chr&gt;, … [39m</span></span></code></pre></div>
<p>Similarly, the sample information for an entire experiment run can be
retrieved with:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/info.html">runInfo</a></span><span class="op">(</span><span class="va">grover_client</span>,<span class="st">'Thermo-Exactive'</span>,<span class="st">'Experiment_1'</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Genrating run info table for <span style="color: #0000BB; font-weight: bold;">Experiment_1</span> containing <span style="color: #BBBB00; font-weight: bold;">1</span> .raw files</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 39</span></span></span>
<span><span class="co">#&gt;   `RAW file` RAW file …¹ Creat…² Opera…³ Numbe…⁴ Descr…⁵ Instr…⁶ Instr…⁷ Instr…⁸</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> QC01.raw   64          04/25/… Thermo        2 <span style="color: #949494;">""</span>      Exacti… Thermo… C:/Xca…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 30 more variables: `Serial number` &lt;chr&gt;, `Software version` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Firmware version` &lt;chr&gt;, Units &lt;chr&gt;, `Mass resolution` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Number of scans` &lt;dbl&gt;, `Number of ms2 scans` &lt;dbl&gt;, `Scan range` &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Time range` &lt;dbl&gt;, `Mass range` &lt;dbl&gt;, `Scan filter (first scan)` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Scan filter (last scan)` &lt;chr&gt;, `Total number of filters` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Sample name` &lt;chr&gt;, `Sample id` &lt;chr&gt;, `Sample type` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Sample comment` &lt;chr&gt;, `Sample vial` &lt;chr&gt;, `Sample volume` &lt;chr&gt;, …</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="raw-file-conversion-to--mzml-format">Raw file conversion to .mzML format<a class="anchor" aria-label="anchor" href="#raw-file-conversion-to--mzml-format"></a>
</h2>
<p>With <code>grover</code> it is also possible retrieve
<code>.mzML</code> format data files, converted from the
<code>.raw</code> files. This file conversion uses the command line tool
<a href="http://proteowizard.sourceforge.net/tools.shtml" class="external-link">msconvert</a>,
implemented in R by the <a href="https://github.com/wilsontom/msconverteR" class="external-link">msconverteR</a>
package.</p>
<div class="section level3">
<h3 id="file-conversion">File conversion<a class="anchor" aria-label="anchor" href="#file-conversion"></a>
</h3>
<p>To retrieve the example <code>.raw</code> file in <code>.mzML</code>
format, the <code><a href="../reference/convert.html">convertFile()</a></code> function can be used. This takes
similar inputs as <code><a href="../reference/transfer.html">transferFile()</a></code> shown previously.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/convert.html">convertFile</a></span><span class="op">(</span><span class="va">grover_client</span>,</span>
<span>            <span class="st">'Thermo-Exactive'</span>,</span>
<span>            <span class="st">'Experiment_1'</span>,</span>
<span>            <span class="st">'QC01.raw'</span>,</span>
<span>            outDir <span class="op">=</span> <span class="st">'.'</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/convert.html">convertDirectory</a></span><span class="op">(</span><span class="va">grover_client</span>,</span>
<span>            <span class="st">'Thermo-Exactive'</span>,</span>
<span>            <span class="st">'Experiment_1'</span>,</span>
<span>            outDir <span class="op">=</span> <span class="st">'.'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="conversion-arguments">Conversion arguments<a class="anchor" aria-label="anchor" href="#conversion-arguments"></a>
</h3>
<p>The <code>args</code> argument can be supplied to these conversion
functions pass specific conversion criterial to <code>msconvert</code>.
The <code>grover</code> package contains a number of helper functions to
simplify their use. The available functions are listed below.</p>
<pre><code><span><span class="va">conversionArgsMSlevel1</span></span>
<span><span class="va">conversionArgsMSlevel2</span></span>
<span><span class="va">conversionArgsMSlevel3</span></span>
<span><span class="va">conversionArgsNegativeMode</span></span>
<span><span class="va">conversionArgsPeakPick</span></span>
<span><span class="va">conversionArgsPositiveMode</span></span></code></pre>
<p>Calling these functions return the appropriate string argument that
is to be passed to msconvert.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/conversionArgs.html">conversionArgsPeakPick</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "peakPicking true 1-"</span></span></code></pre></div>
<p>Mutiple functions can also be combined.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="../reference/conversionArgs.html">conversionArgsPeakPick</a></span><span class="op">(</span><span class="op">)</span>,<span class="fu"><a href="../reference/conversionArgs.html">conversionArgsNegativeMode</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "peakPicking true 1- polarity negative"</span></span></code></pre></div>
<p>A full list of the available msconvert arguments can be found <a href="http://proteowizard.sourceforge.net/tools.shtml" class="external-link">here</a>. The
example below shows the use of the <code><a href="../reference/conversionArgs.html">conversionArgsPeakPick()</a></code>
to retrieve a centroided data in <code>.mzML</code> format.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/convert.html">convertFile</a></span><span class="op">(</span><span class="va">grover_client</span>,</span>
<span>            <span class="st">'Thermo-Exactive'</span>,</span>
<span>            <span class="st">'Experiment_1'</span>,</span>
<span>            <span class="st">'QC01.raw'</span>,</span>
<span>            args <span class="op">=</span> <span class="fu"><a href="../reference/conversionArgs.html">conversionArgsPeakPick</a></span><span class="op">(</span><span class="op">)</span>, </span>
<span>            outDir <span class="op">=</span> <span class="st">'.'</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>To conclude, we can terminte the process running the example grover
API instance.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">api</span><span class="op">$</span><span class="fu">kill</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jasen Finch.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
